"use strict";(self.webpackChunkmccabe_thiele_method_online=self.webpackChunkmccabe_thiele_method_online||[]).push([[792],{374:(e,t,n)=>{class o{xd;xb;zf;q;r_factor;nm;sc;constructor(){this.xd=parseFloat(document.getElementById("xd").value),this.xb=parseFloat(document.getElementById("xb").value),this.zf=parseFloat(document.getElementById("zf").value),this.q=parseFloat(document.getElementById("q").value),this.r_factor=parseFloat(document.getElementById("r_factor").value),this.nm=parseFloat(document.getElementById("nm").value),this.sc=parseFloat(document.getElementById("sub_cooling").value),this.validate()}validate(){return[this.xd,this.xb,this.zf,this.q,this.r_factor,this.nm,this.sc].some(e=>isNaN(e))?(console.error("입력값 오류: 일부 값이 숫자가 아닙니다 (NaN).",this),alert("유효하지 않은 입력값이 있습니다. 숫자만 입력해주세요."),!1):((this.xd<=this.zf||this.zf<=this.xb)&&console.warn(`입력값 경고: 조성 순서가 올바르지 않습니다 (xd > zf > xb 여야 함). xd=${this.xd}, zf=${this.zf}, xb=${this.xb}`),!0)}}const s=[{x:0,y:0},{x:.012,y:.068},{x:.02,y:.121},{x:.026,y:.159},{x:.033,y:.188},{x:.036,y:.215},{x:.053,y:.275},{x:.076,y:.366},{x:.1,y:.438},{x:.12,y:.485},{x:.14,y:.522},{x:.15,y:.541},{x:.2,y:.605},{x:.3,y:.686},{x:.4,y:.739},{x:.5,y:.779},{x:.6,y:.825},{x:.7,y:.87},{x:.8,y:.915},{x:.9,y:.958},{x:.95,y:.979},{x:1,y:1}];function l(e){if(e<=0)return 0;if(e>=1)return 1;let t=s[0],n=s[1];for(let o=1;o<s.length;o++)if(s[o].x>=e){t=s[o-1],n=s[o];break}const o=(n.y-t.y)/(n.x-t.x);return t.y+(e-t.x)*o}function a(e,t){if(t<=e[0].y)return e[0].x;if(t>=e[e.length-1].y)return e[e.length-1].x;let n=0,o=e.length-1,s=e[n],l=e[o];for(;o-n>1;){let s=Math.floor((n+o)/2);e[s].y<t?n=s:o=s}s=e[n],l=e[o];const a=(l.x-s.x)/(l.y-s.y);return s.x+(t-s.y)*a}var i=n(106);let r=null;const d=document.getElementById("calc-form"),c=document.getElementById("mccabeThieleChart"),x=document.getElementById("results-text"),u=c.getContext("2d");function y(){try{const e=new o,{plotData:t,results:n,floatStageNum:s}=function(e){const{xd:t,xb:n,zf:o,q:s,r_factor:i,nm:r,sc:d}=e,c={ideal_eq_curve:[],line_45:[{x:0,y:0},{x:1,y:1}],q_line:[],esol_line:[],ssol_line:[],steps:[],effective_curve:[]},x={R_min:0,R:0,stages:0,feed_stage:0,xb_actual:0},{x:u,y}=function(e,t){if(Math.abs(e-1)<1e-6)return{x:t,y:l(t)};if(Math.abs(e)<1e-6){const e=function(e){let t,n=0,o=1;for(let s=0;s<30;s++)t=(n+o)/2,l(t)<e?n=t:o=t;return(n+o)/2}(t);return{x:e,y:t}}const n=e/(e-1),o=-t/(e-1),s=e=>l(e)-(e=>n*e+o)(e);let a,i=0,r=1;for(let e=0;e<30;e++)a=(i+r)/2,s(a)<0?i=a:r=a;const d=(i+r)/2;return{x:d,y:l(d)}}(s,o),f=(t-y)/(t-u);x.R_min=f/(1-f),x.R=x.R_min*i;let m=x.R;const h=1+81.6*d/35270;m=x.R*h;const _=m/(m+1),b=t/(m+1);let p,g;Math.abs(s-1)<1e-6?(p=o,g=_*p+b):(p=(b- -o/(s-1))/(s/(s-1)-_),g=_*p+b);const v=(g-n)/(p-n),E=n-v*n;c.q_line=[{x:o,y:o},{x:u,y}],c.esol_line=[{x:t,y:t},{x:p,y:g}],c.ssol_line=[{x:n,y:n},{x:p,y:g}];const C=e=>_*e+b,R=e=>v*e+E;for(let e=0;e<=100;e++){const t=e/100,n=l(t);c.ideal_eq_curve.push({x:t,y:n});const o=C(t),s=o+r*(n-o);t>p&&c.effective_curve.push({x:t,y:s});const a=R(t),i=a+r*(n-a);t<=p&&c.effective_curve.push({x:t,y:i})}let F=t,I=t,B=0,L=0;for(;F>n&&B<200;){let e;B++;const t=I;let o;if(e=a(c.effective_curve,I),e>p?o=C(e):(o=R(e),0===x.feed_stage&&(x.feed_stage=B)),c.steps.push([{x:F,y:t},{x:e,y:t}]),c.steps.push([{x:e,y:t},{x:e,y:o}]),e<n){L=B+(F-n)/(F-e);break}F=e,I=o}return 0===x.feed_stage&&(x.feed_stage=1),x.stages=B,x.xb_actual=F,{plotData:c,results:x,floatStageNum:L}}(e);!function(e,t){document.getElementById("results_Rmin").textContent=e.R_min.toFixed(3),document.getElementById("results_Rreal").textContent=e.R.toFixed(3),document.getElementById("results_Rfactor").textContent=document.getElementById("r_factor").value,document.getElementById("results_Nstage").textContent=e.stages,document.getElementById("results_Nstage_float").textContent=t.toFixed(1),document.getElementById("results_Fstage").textContent=e.feed_stage}(n,s),function(e){const t=[{label:"Ideal Equilibrium (VLE)",data:e.ideal_eq_curve,borderColor:"blue",borderWidth:2,pointRadius:0,showLine:!0,type:"line"},{label:"Effective Eq. (Rectifying)",data:e.effective_curve,borderColor:"#00c000",borderDash:[5,5],borderWidth:2,pointRadius:0,showLine:!0,type:"line"},{label:"y = x",data:e.line_45,borderColor:"grey",borderWidth:1,pointRadius:0,showLine:!0,type:"line"},{label:"q-Line",data:e.q_line,borderColor:"orange",borderWidth:2,pointRadius:0,showLine:!0,type:"line"},{label:"ESOL",data:e.esol_line,borderColor:"#6a5acd",borderWidth:2,pointRadius:0,showLine:!0,type:"line"},{label:"SSOL",data:e.ssol_line,borderColor:"#6a5acd",borderWidth:2,pointRadius:0,showLine:!0,type:"line"},...e.steps.map(e=>({type:"line",data:e,borderColor:"#FF6384",borderWidth:1.5,pointRadius:0,fill:!1,showLine:!0,showInLegend:!1}))];r&&r.destroy(),r=new i.t1(u,{type:"scatter",data:{datasets:t},options:{plugins:{title:{display:!0,text:"McCabe-Thiele Plot (Methanol-Water @ 1 atm)",font:{size:18}},legend:{position:"bottom",labels:{filter:e=>!!e.text}},tooltip:{callbacks:{label:e=>{const t=e.raw;return`${e.dataset.label}: (x: ${t.x.toFixed(3)}, y: ${t.y.toFixed(3)})`}}}},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Liquid Mole Fraction (x)"},min:0,max:1},y:{type:"linear",title:{display:!0,text:"Vapor Mole Fraction (y)"},min:0,max:1}},aspectRatio:1,animation:!1,parsing:!1}})}(t)}catch(e){console.error("McCabe-Thiele 계산 중 오류 발생:",e),alert(`계산에 실패했습니다: ${e.message}\n콘솔(F12)에서 자세한 내용을 확인하세요.`),x.textContent=`계산 오류:\n${e.message}`}}i.t1.register(i.kc,i.FN,i.No,i.ZT,i.dN,i.m_,i.s$,i.hE,i.Pz),d.addEventListener("submit",e=>{e.preventDefault(),y()}),document.addEventListener("DOMContentLoaded",()=>{console.log("페이지 로드 완료. 기본값으로 첫 계산을 실행합니다."),y()})}},e=>{e.O(0,[106],()=>e(e.s=374)),e.O()}]);
//# sourceMappingURL=main.bca1effdc40f2dfa75e8.js.map