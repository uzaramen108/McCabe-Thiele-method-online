"use strict";(self.webpackChunkmccabe_thiele_method_online=self.webpackChunkmccabe_thiele_method_online||[]).push([[792],{374:()=>{class e{xd;xb;zf;q;r_factor;nm;sc;constructor(){this.xd=parseFloat(document.getElementById("xd").value),this.xb=parseFloat(document.getElementById("xb").value),this.zf=parseFloat(document.getElementById("zf").value),this.q=parseFloat(document.getElementById("q").value),this.r_factor=parseFloat(document.getElementById("r_factor").value),this.nm=parseFloat(document.getElementById("nm").value),this.sc=parseFloat(document.getElementById("sub_cooling").value),this.validate()}validate(){return[this.xd,this.xb,this.zf,this.q,this.r_factor,this.nm,this.sc].some(e=>isNaN(e))?(console.error("입력값 오류: 일부 값이 숫자가 아닙니다 (NaN).",this),alert("유효하지 않은 입력값이 있습니다. 숫자만 입력해주세요."),!1):((this.xd<=this.zf||this.zf<=this.xb)&&console.warn(`입력값 경고: 조성 순서가 올바르지 않습니다 (xd > zf > xb 여야 함). xd=${this.xd}, zf=${this.zf}, xb=${this.xb}`),!0)}}const t=[{x:0,y:0},{x:.012,y:.068},{x:.02,y:.121},{x:.026,y:.159},{x:.033,y:.188},{x:.036,y:.215},{x:.053,y:.275},{x:.076,y:.366},{x:.1,y:.438},{x:.12,y:.485},{x:.14,y:.522},{x:.15,y:.541},{x:.2,y:.605},{x:.3,y:.686},{x:.4,y:.739},{x:.5,y:.779},{x:.6,y:.825},{x:.7,y:.87},{x:.8,y:.915},{x:.9,y:.958},{x:.95,y:.979},{x:1,y:1}];function n(e){if(e<=0)return 0;if(e>=1)return 1;let n=t[0],o=t[1];for(let a=1;a<t.length;a++)if(t[a].x>=e){n=t[a-1],o=t[a];break}const a=(o.y-n.y)/(o.x-n.x);return n.y+(e-n.x)*a}function o(e,t){if(t<=e[0].y)return e[0].x;if(t>=e[e.length-1].y)return e[e.length-1].x;let n=0,o=e.length-1,a=e[n],l=e[o];for(;o-n>1;){let a=Math.floor((n+o)/2);e[a].y<t?n=a:o=a}a=e[n],l=e[o];const s=(l.x-a.x)/(l.y-a.y);return a.x+(t-a.y)*s}let a=null;const l=document.getElementById("calc-form"),s=document.getElementById("mccabeThieleChart"),i=document.getElementById("results-text"),r=s.getContext("2d");function d(){try{const t=new e,{plotData:l,results:s,floatStageNum:d}=function(e){const{xd:t,xb:a,zf:l,q:s,r_factor:i,nm:r,sc:d}=e,c={ideal_eq_curve:[],line_45:[{x:0,y:0},{x:1,y:1}],q_line:[],esol_line:[],ssol_line:[],steps:[],effective_curve:[]},x={R_min:0,R:0,stages:0,feed_stage:0,xb_actual:0},{x:u,y}=function(e,t){if(Math.abs(e-1)<1e-6)return{x:t,y:n(t)};if(Math.abs(e)<1e-6){const e=function(e){let t,o=0,a=1;for(let l=0;l<30;l++)t=(o+a)/2,n(t)<e?o=t:a=t;return(o+a)/2}(t);return{x:e,y:t}}const o=e/(e-1),a=-t/(e-1),l=e=>n(e)-(e=>o*e+a)(e);let s,i=0,r=1;for(let e=0;e<30;e++)s=(i+r)/2,l(s)<0?i=s:r=s;const d=(i+r)/2;return{x:d,y:n(d)}}(s,l),f=(t-y)/(t-u);x.R_min=f/(1-f),x.R=x.R_min*i;let h=x.R;const m=1+81.6*d/35270;h=x.R*m;const b=h/(h+1),p=t/(h+1);let _,g;Math.abs(s-1)<1e-6?(_=l,g=b*_+p):(_=(p- -l/(s-1))/(s/(s-1)-b),g=b*_+p);const v=(g-a)/(_-a),R=a-v*a;c.q_line=[{x:l,y:l},{x:u,y}],c.esol_line=[{x:t,y:t},{x:_,y:g}],c.ssol_line=[{x:a,y:a},{x:_,y:g}];const E=e=>b*e+p,F=e=>v*e+R;for(let e=0;e<=100;e++){const t=e/100,o=n(t);c.ideal_eq_curve.push({x:t,y:o});const a=E(t),l=a+r*(o-a);t>_&&c.effective_curve.push({x:t,y:l});const s=F(t),i=s+r*(o-s);t<=_&&c.effective_curve.push({x:t,y:i})}let C=t,w=t,L=0,$=0;for(;C>a&&L<200;){let e;L++;const t=w;let n;if(e=o(c.effective_curve,w),e>_?n=E(e):(n=F(e),0===x.feed_stage&&(x.feed_stage=L)),c.steps.push([{x:C,y:t},{x:e,y:t}]),c.steps.push([{x:e,y:t},{x:e,y:n}]),e<a){$=L+(C-a)/(C-e);break}C=e,w=n}return 0===x.feed_stage&&(x.feed_stage=1),x.stages=L,x.xb_actual=C,{plotData:c,results:x,floatStageNum:$}}(t);!function(e,t){const n=`\n    -- 계산 결과 (Results) --\n    최소 환류비 (R_min)   : ${e.R_min.toFixed(3)}\n    실제 환류비 (R)       : ${e.R.toFixed(3)} (R_min의 ${document.getElementById("r_factor").value}배)\n    \n    총 이론 단 수 (Stages): ${e.stages}(${t.toFixed(1)}) 단\n    최적 공급 단 (Feed @) : ${e.feed_stage} 번째 단 (from top)\n    \n    실제 하부 조성 (xb_actual): ${e.xb_actual.toFixed(5)}\n    (목표 하부 조성: ${document.getElementById("xb").value})\n    `;i.textContent=n}(s,d),function(e){const t=[{label:"Ideal Equilibrium (VLE)",data:e.ideal_eq_curve,borderColor:"blue",borderWidth:2,pointRadius:0,showLine:!0,type:"line"},{label:"Effective Eq. (Rectifying)",data:e.effective_curve,borderColor:"#00c000",borderDash:[5,5],borderWidth:2,pointRadius:0,showLine:!0,type:"line"},{label:"y = x",data:e.line_45,borderColor:"grey",borderWidth:1,pointRadius:0,showLine:!0,type:"line"},{label:"q-Line",data:e.q_line,borderColor:"orange",borderWidth:2,pointRadius:0,showLine:!0,type:"line"},{label:"ESOL",data:e.esol_line,borderColor:"#6a5acd",borderWidth:2,pointRadius:0,showLine:!0,type:"line"},{label:"SSOL",data:e.ssol_line,borderColor:"#6a5acd",borderWidth:2,pointRadius:0,showLine:!0,type:"line"},...e.steps.map(e=>({type:"line",data:e,borderColor:"#FF6384",borderWidth:1.5,pointRadius:0,fill:!1,showLine:!0,showInLegend:!1}))];a&&a.destroy(),a=new window.Chart(r,{type:"scatter",data:{datasets:t},options:{plugins:{title:{display:!0,text:"McCabe-Thiele Plot (Methanol-Water @ 1 atm)",font:{size:18}},legend:{position:"bottom",labels:{filter:e=>!!e.text}},tooltip:{callbacks:{label:e=>{const t=e.raw;return`${e.dataset.label}: (x: ${t.x.toFixed(3)}, y: ${t.y.toFixed(3)})`}}}},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Liquid Mole Fraction (x)"},min:0,max:1},y:{type:"linear",title:{display:!0,text:"Vapor Mole Fraction (y)"},min:0,max:1}},aspectRatio:1,animation:!1,parsing:!1}})}(l)}catch(e){console.error("McCabe-Thiele 계산 중 오류 발생:",e),alert(`계산에 실패했습니다: ${e.message}\n콘솔(F12)에서 자세한 내용을 확인하세요.`),i.textContent=`계산 오류:\n${e.message}`}}l.addEventListener("submit",e=>{e.preventDefault(),d()}),document.addEventListener("DOMContentLoaded",()=>{console.log("페이지 로드 완료. 기본값으로 첫 계산을 실행합니다."),d()})}},e=>{e(e.s=374)}]);
//# sourceMappingURL=main.db78bc3b6a49334260b3.js.map